<meta charset="utf-8">
<script>
var users = [];

/* event */
var eve = {
    login: function(data){
        // 处理所有用户列表
        // {u: uuid, a: [uuid_name_img, uuid_name_img ...]}
        console.log(data)
    },
    online: function(data){
        // 处理用户上线
        // {u: uuid, a: [name, img]}
        console.log(data)
    },
    offline: function(data){
        // 处理用户下线
        // {u: uuid, a: []}
        console.log(data)
    },
    message: function(data){
        // 处理某用户发送消息
        // {u: uuid, a: [massage]}
        console.log(data)
    }
}
// 登录 name:用户名 img:头像
var ws = new WebSocket("ws://127.0.0.1:2333/ws?name=kicoe&img=nya")
var all = 0;
ws.onopen = function(){
    // ++ 关闭事件
};
ws.onmessage = function(e){
    console.log(e.data);
    var data = JSON.parse(e.data)
    eve[data.E](data.A)
};
// 向某用户发送消息
function send(id, message){
    ws.send('{"c":"send","a":{"u":'+id+',"a":["'+message+'"]}}')
}
</script>